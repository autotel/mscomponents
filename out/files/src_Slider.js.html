<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src\Slider.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/Slider.html">Slider</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: src\Slider.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/*
This script create DOM sliders that can be used in web browser to control stuff. They can be synced through sockets and others by using callbacks.
    Copyright (C) 2016 Joaqu√≠n Aldunate

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.
*/
var syncman,mouse;
// var $;
exports.enable=function(sman,m){
  syncman=sman;
  mouse=m;
  return Slider;
};

/**
* This is the description for Slider class
*
* @class Slider
* @constructor
*/
function Slider(parent,options){
  //my reference number for data binding. With this number the socket binder knows who is the reciever of the data, and also with what name to send it
  //pendant: this can potentially create a problem, because two objects can be created simultaneously at different ends at the same time.
  //maybe instead of the simple push, there could be a callback, adn the object waits to receive it&#x27;s socket id once its creation was propagated throughout all the network, or maybe there is an array for senting and other different for receiving... first option seems more sensible
  this.data={value:0};

  this._bindN=syncman.bindList.push(this)-1;
  this.$jq=$(&#x27;&lt;div class=&quot;slider-container&quot; style=&quot;position:relative&quot;&gt;&lt;/div&gt;&#x27;);
  this.$faderjq=$(&#x27;&lt;div class=&quot;slider-inner&quot; style=&quot;pointer-events:none; position:absolute&quot;&gt;&lt;/div&gt;&#x27;);
  this.label=options.label||&quot;&quot;;
  this.labeljq=$(&#x27;&lt;p class=&quot;sliderlabel&quot;&gt;&lt;/p&gt;&#x27;);
  this.$jq.append(this.$faderjq);
  this.$jq.append(this.labeljq);
  if(options.css)
    this.$jq.css(options.css);
  this.css=function(css){
    this.$jq.css(css);
    return this;
  }
  this.onChangeCallback=function(){};
  //pendant: this should be part of a base prototype, not repeated in each type
  if(typeof (parent.append||false)==&quot;function&quot;){
    parent.append(this.$jq);
  }else if(typeof (parent.$jq.append||false)==&quot;function&quot;){
    parent.$jq.append(this.$jq);
  }else{
    console.log(&quot;a slider couldn&#x27;t find dom element to attach himself&quot;);
  }
  var me=this;
  this.onChange=function(callback){
    me.onChangeCallback=function(){callback(me.data)};
    return this;
  }
  /**
* My method description.  Like other pieces of your comment blocks,
* this can span multiple lines.
*
* @method methodName
* @param {String} foo Argument 1
* @param {Object} config A config object
* @param {String} config.name The name on the config object
* @param {Function} config.callback A callback function on the config object
* @param {Boolean} [extra=false] Do extra, optional work
* @return {Boolean} Returns true on success
*/
  this.setData=function(to,emit){
    if(emit===true){
      //pendant: in sequencers we use parent.id, and here we use _bindN. Towards a controller API and a more sensical code, I think both should use the bind element array. read note in first line of this file.
      //pendant: parent in seq is what me is here. this is pretty confusing var name decision
      syncman.emit(&quot;slid:&quot;+me._bindN+&quot;&quot;,&quot;sV&quot;,to);
    }
    this.data.value=to;
    this.onChangeCallback();
    this.updateDom();
  }
  this.addClass=function(to){
    this.$jq.addClass(to);
  }
  this.vertical=true;
  this.addClass(&quot;vertical&quot;);
  this.$jq.on(&quot;mousedown tap touchstart&quot;,function(event){
    event.preventDefault();
    if(me.vertical){
      me.setData(1-event.offsetY/me.$jq.height(),true);//,true
    }else{
      me.setData(event.offsetX/me.$jq.width(),true);//,true
    }
  });

  this.$jq.on(&quot;mousemove touchenter mouseleave mouseup&quot;,function(event){
    if(mouse.buttonDown){
      event.preventDefault();
      var emitThis=event.type==&quot;mouseleave&quot;||event.type==&quot;mouseup&quot;
      if(me.vertical){
        //the strange second paramenter in setdata was true, but it could clog the socket
        me.setData(1-event.offsetY/me.$jq.height(),emitThis);//,true
      }else{
        me.setData(event.offsetX/me.$jq.width(),emitThis);//,true
      }
    }else{
    }
  });
  this.eval=function(){
    var jq=this.$jq;
    jq.addClass(&quot;turn&quot;);
    window.setTimeout(function(){
      jq.removeClass(&quot;turn&quot;);
    },200);
    return this.data.value;
  }
  this.updateDom=function(){
    if(this.vertical){
      this.$faderjq.css({bottom:0,width:&quot;100%&quot;,height:this.data.value*this.$jq.height()});
    }else{
      this.labeljq.html(this.label);
      this.$faderjq.css({bottom:0,width:this.data.value*this.$jq.width(),height:&quot;100%&quot;});
    }
  }
  this.setData(0);
}
    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
